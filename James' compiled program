import sys
import time
import random
place = 1

def cheak_txt(name):
    file_lenth = len(name)              #calculating str lenth
    end_four = file_lenth - 4           #sampeling last 4 letters of str
    if (name[end_four:file_lenth] !=  ".txt"):    #making end of in put .txt
        return name + ".txt"
    else:
        return name                                                #if input has .txt dont add .txt

def check(fn):
    try:                        #try to see if..
        file =open(fn,'r+')                #test if userinput can be oppened
    except (RuntimeError, TypeError, NameError, FileNotFoundError):     #if userinput isnt openable ...
        print ("oops looks like yove input the wrong Filename")         #print the following
        menu()

    context = file.read()               #if the userinput can be oppend creat var for that file context
    return context

def encript():                      
    file_name = input("Please enter the file name of file wich you want to encrypt\n") # asking for the file name

    file_name=cheak_txt(file_name)           #making sure file name == .txt bes going to cheak_txt()
    context =check(file_name)               #calling check to make sure the name is correct
     
    number_list     = []                #creating a list wich holds the random number
    charicter_list  = ""              #creating a str to hold the chr of the random numbers 
    offset = 0                      #creating a var for the offset value wich will chang the charicters

    
    for i in range (0,8):                         #for any number between 0 and 8 make a
        number = random.randint(33,126)             #generating a random no between 33&126
        number_list.append(number)                #adding that number to number list
        offset = offset + number                #setting offstet to sum of all random no.

        charicter = chr(number)                #making charicter=to the chr value of the random number
        charicter_list +=(charicter)            #adding that charicet to a srting
        
    offset=offset/8          #dividing offset by 8
    offset = offset - 32      #subtracting 32 from offset
    offset=int(offset)       #making offset a whole no.

    print (offset)
    print ("Your 8 charicter key is\n",charicter_list )

    encrypted = ""          #making a str called encrypt
    for c in  context:          #for every letter in the file
        if c != " ":            #if the int is blank do nothing
            numbercode = ord(c)       #make that letter a number
            numbercode += offset      #change that number by the offset
            if numbercode > 126:         #if thar number for the charicter is over 126
                numbercode-= 94          #subtracht 94
            encrypted += chr(numbercode)    #add that chr to the var encrypt 

        else:
            encrypted += c
            
    encrypted +=("\n\n")
    encrypted += ("Your key is\n" + str(charicter_list))
    
    print ("Your message is\n\n" + encrypted + "\n")    #printing you encrypted message
    savefile=input("please enter the name for your encrypted file\n")   #creating a var to hold name of saved file
    savefile=cheak_txt(savefile)                        #cheaking the file name contains .txt

    file = open(savefile, "w+")             #opening a file with the file name
    file.write(encrypted)                   #filling that file with encrypted message
    file.close()                            #closing the saved file
    print ("file has been saved")
    menu()
     
def decript():                      # Creating the functions #
    file_name = input("Please enter the file name of file wich you want to decrypt\n") # asking for file name

    file_name=cheak_txt(file_name)           #making sure file name == .txt bes going to cheak_txt()
    context =check(file_name)                             #calling check to make sure the name is correct            

      
    bit_code = input("Plese enter your 8 charicter key\n")

    decrypt = 0
    for c in bit_code:
        key = ord(c)
        decrypt = decrypt + key   

    offset = decrypt
    offset = offset/8
    offset = offset - 32
    offset = int(offset)
    print ("offset", offset)

    per = ""
    for c in context:
        if c != " ":
            num = ord(c)
            num = num - offset
            if num < 33:
                num += 94
                per = per + chr(num)
        else:
            per += c

        
         
    print (per)
     
def exitprog():                     
    sys.exit
def menu ():
    print ("Please select an option")
    menu = 1

    while menu != "3":
        print ("~~~~~~~~~~~~~~~")
        menu=input("1.Encript\n2.Decrypt\n3.Exit\n")
     
        if menu == "1":
            encript()
        elif menu == "2":
            decript()
        elif menu == "3":
            exitprog()
        else:
            print ("please enter a valied option")
            time.sleep(2)

if place == 1:
    menu()
